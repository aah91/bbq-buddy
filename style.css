/* ========= Design Tokens ========= */
:root{
  --bg:#f8f9fa;
  --panel:#fff;
  --text:#333;
  --muted:#666;
  --line:#ddd;
  --line-soft:#e5e5e5;

  --primary:#007bff;
  --primary-hover:#0069d9;
  --success:#28a745;
  --danger:#dc3545;
  --danger-hover:#c82333;

  --shadow:0 1px 0 rgba(0,0,0,.06);
  --radius:6px;
  --ease:200ms ease;
  --focus:#2684ff66;
}

/* ========= Reset & Grundlayout ========= */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  font-size:16px; line-height:1.5;
  color:var(--text); background:var(--bg);
  display:flex; flex-direction:column; min-height:100vh;
}

/* ========= Kopf & Fuß ========= */
header.header, footer.footer{
  background:var(--panel); border-bottom:1px solid var(--line);
  padding:1rem 2rem;
}
footer.footer{
  border-top:1px solid var(--line); border-bottom:none;
  margin-top:auto; text-align:center; font-size:.9rem; color:var(--muted);
}
.subtitle{color:var(--muted); font-size:.9rem; margin-top:.25rem}

/* ========= Navigation ========= */
.nav{display:flex;gap:1rem;margin-bottom:.5rem}
.nav a{color:var(--primary);text-decoration:none;font-weight:500}
.nav a:hover{text-decoration:underline}
.nav a.active{color:#333;font-weight:600;border-bottom:2px solid var(--primary)}

/* ========= Toolbar ========= */
.toolbar{
  background:var(--panel); border-bottom:1px solid var(--line);
  padding:.75rem 2rem; display:flex; justify-content:space-between; align-items:center;
  gap:1rem; flex-wrap:wrap;
}
.toolbar--sticky{position:sticky; top:0; z-index:5; box-shadow:var(--shadow)}
.toolbar input[type="search"], .toolbar select{
  margin-left:.5rem; padding:.45rem .6rem; border:1px solid #ccc; border-radius:4px; background:#fff;
}
.toolbar input[type="search"]:focus, .toolbar select:focus{outline:2px solid var(--focus); outline-offset:2px}

/* ========= Inputs ========= */
input[type="text"], input[type="search"], input[type="date"], input[type="time"], select{
  width:auto; background:#fff; border:1px solid #ccc; border-radius:4px; padding:.45rem .6rem;
}
input:focus, select:focus{outline:2px solid var(--focus); outline-offset:2px}

/* ========= Tabellen ========= */
.table-wrap{padding:1rem 2rem}
.table{width:100%; border-collapse:collapse; background:var(--panel)}
.table th, .table td{border:1px solid var(--line-soft); padding:.5rem .75rem; text-align:left}
.table th{background:#f1f3f5; font-weight:600}
.table tbody tr:hover{background:#f7f9fb}
.actions-col{width:220px}
.row-actions a{white-space:nowrap}

/* ========= Buttons ========= */
.btn{
  display:inline-block; padding:.5rem 1rem; border-radius:4px;
  text-decoration:none; font-weight:500; cursor:pointer;
  border:1px solid transparent; transition:background-color var(--ease), color var(--ease), border-color var(--ease);
}
.btn:focus{outline:2px solid var(--focus); outline-offset:2px}
.btn:disabled{opacity:.6; cursor:not-allowed}
.btn-primary{background:var(--primary); color:#fff}
.btn-primary:hover{background:var(--success)} /* gewünscht: Hover grün */
.btn-danger{background:var(--danger); color:#fff}
.btn-danger:hover{background:var(--danger-hover)}
.btn-light{background:#f1f3f5; color:#333; border:1px solid #ccc}
.btn-light:hover{background:#e9ecef}

/* ========= Badges ========= */
.badge{background:#e9ecef; border-radius:4px; padding:.2rem .5rem; font-size:.85rem}

/* ========= Seitenlayout (Liste) ========= */
.layout{display:block}
.table-scroll{
  background:var(--panel); margin:1rem 2rem; border:1px solid var(--line);
  overflow:auto; max-height:calc(100vh - 210px);
}
.table-scroll::-webkit-scrollbar{width:10px; height:10px}
.table-scroll::-webkit-scrollbar-thumb{background:#d0d4d9; border-radius:6px}
.table-scroll::-webkit-scrollbar-track{background:#f1f3f5}

/* ========= Modal (einheitlich) ========= */
.modal{
  display:none; position:fixed; inset:0; background:rgba(0,0,0,.4);
  justify-content:center; align-items:center; padding:1rem; z-index:1000;
}
.modal.is-open{display:flex}
.modal-content{
  background:#fff; 
  padding:1.5rem; 
  border-radius:var(--radius);
  width:420px; 
  max-width:90%; 
  box-shadow:0 10px 30px rgba(0,0,0,.15); 
  position:relative; z-index:1001;
}
.modal-header{margin-bottom:1rem}
.modal-body .form-row{margin-bottom:1rem}
.modal-body label{display:block; margin-bottom:.25rem; font-weight:500}
.modal-footer{display:flex; gap:.5rem; justify-content:flex-end; margin-top:1rem}

/* ========= A11y ========= */
.visually-hidden{
  position:absolute !important; height:1px; width:1px; overflow:hidden;
  clip:rect(1px,1px,1px,1px); white-space:nowrap;
}

/* ========= EVENTS: Modal spezifisch ========= */

/* Größeres Modal */
#event-modal .modal-content{
  width:1200px;
  max-width:98vw;
  height: 800px;
  max-height:90vh;
  border-radius:10px;
  box-shadow:0 12px 32px rgba(0,0,0,.18);
} 

/* Tabs */
#event-modal .tabs{
  gap:.5rem;
  padding:0 .5rem .5rem;
  border-bottom:1px solid #eee;
}
#event-modal .tab-btn{
  appearance:none;
  border:1px solid #ddd;
  background:#f8f9fa;
  font:inherit;
  font-weight:600;
  padding:.4rem .75rem;
  border-radius:6px;
  cursor:pointer;
}
#event-modal .tab-btn.active{
  background:#fff;
  border-color:#bbb;
  box-shadow:inset 0 -2px 0 #2684ff;
}

/* Panel-Inhalt */
#event-modal .tab-panel .modal-body{
  padding:.75rem;
  max-height:75vh;
  overflow:auto;
  overflow-x:hidden;          /* keine horizontale Scrollbar */
}

/* Produkte-Tab: zwei gleich breite Karten (nebeneinander) */
#event-modal #tab-products .modal-body{
  display:grid !important;    /* sicherstellen, dass Grid greift */
  grid-template-columns:45% 55%;
  gap:1rem;
  align-items:stretch;
}

/* Karten/Pane-Optik */
#event-modal #tab-products .card-block{
  background:#fff;
  border:1px solid #e6e8eb;
  border-radius:10px;
  padding:.75rem;
  display:flex;
  flex-direction:column;
  min-width:0;                /* wichtig fürs Schrumpfen im Grid */
  overflow:hidden;
  min-height: 500px; 
}
#event-modal #tab-products h3{
  font-size:1rem;
  margin:0 0 .5rem;
  display:flex;
  gap:.5rem;
  align-items:center;
}

/* Tabellen im Produkte-Tab */
#event-modal #tab-products .table{
  table-layout:fixed;         /* feste Spaltenbreiten */
  width:100%;
  border:1px solid #e6e8eb;
  border-radius:8px;
  overflow:hidden;
  font-size:.95rem;
}
#event-modal #tab-products .table thead th{
  position:sticky;
  top:0;
  background:#f6f7f9;
  z-index:1;
}
#event-modal #tab-products .table th,
#event-modal #tab-products .table td{
  padding:.5rem .6rem;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

/* Spaltenbreiten: Produkt 55%, Kategorie 25%, Aktion 20% */
#event-modal #tab-products .table th:nth-child(1),
#event-modal #tab-products .table td:nth-child(1){ width:35%; }   /* Produkt */
#event-modal #tab-products .table th:nth-child(2),
#event-modal #tab-products .table td:nth-child(2){ width:35%; }   /* Kategorie */
#event-modal #tab-products .table th:nth-child(3),
#event-modal #tab-products .table td:nth-child(3){ width:30%;                      /* Aktion */
  text-align:center;
}

/* Badge im Produkte-Tab */
#event-modal #tab-products .badge{
  display:inline-block;
  max-width:100%;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
#assigned-count.badge{
  font-weight:600;
  background:#eef7ff;
  border:1px solid #cfe5ff;
}

/* Suchzeile im „Produkt hinzufügen“-Block */
#event-modal #tab-products .add-controls{
  display:flex;
  gap:.5rem;
  align-items:center;
  margin-bottom:.5rem;
}
#event-modal #tab-products .add-controls input[type="search"],
#event-modal #tab-products .add-controls select{
  height:36px;
}

/* Kleine [+]/[–]-Knöpfe */
#event-modal a[data-action="add"],
#event-modal a[data-action="remove"]{
  display:inline-block;
  min-width:2.2rem;
  text-align:center;
  border:1px solid #d0d4da;
  border-radius:6px;
  padding:.15rem .4rem;
  text-decoration:none;
  background:#fff;
}
#event-modal a[data-action="add"]:hover{
  border-color:#2ecc71;
  box-shadow:0 0 0 2px rgba(46,204,113,.15);
}
#event-modal a[data-action="remove"]:hover{
  border-color:#e74c3c;
  box-shadow:0 0 0 2px rgba(231,76,60,.15);
}

/* Tabellen-Wrapper im Produkte-Tab */
#event-modal #tab-products .table-wrap {
  flex: 1;              /* füllt die verfügbare Höhe innerhalb des card-blocks */
  min-height: 400px;    /* Grundhöhe (anpassen nach Bedarf) */
  max-height: 100%;     /* nicht über Panel hinauswachsen */
  overflow-y: auto;     /* Scrollen, wenn mehr Zeilen */
}

/* Modal-Footer Linie */
#event-modal .modal-footer{
  border-top:1px solid #eee;
  margin-top:.5rem;
  padding-top:.75rem;
}

/* Toolbar beim offenen Modal unverändert lassen */
body:has(#event-modal.is-open) .toolbar--sticky{
  filter:none !important;
  opacity:1 !important;
}

/* ========= Infinite-Scroll Placeholder ========= */
.infinite-loader, .infinite-end, .infinite-error{
  display:none;
  color:var(--muted);
  text-align:center;
}
.infinite-loader td, .infinite-end td, .infinite-error td{
  padding:.75rem;
}

/* Optional: bei schmalen Viewports die Panels untereinander stapeln */
@media (max-width: 900px){
  #event-modal #tab-products .modal-body{
    grid-template-columns:1fr;
  }
}

/* Einheitlicher Kopf in beiden Panels, damit Tabellen gleich hoch starten */
#event-modal #tab-products .panel-head{
  display:flex;
  align-items:end;            /* Titel/Controls am unteren Rand ausrichten */
  justify-content:space-between;
  gap:.75rem;
  min-height:48px;            /* gleiche Kopf-Höhe auf beiden Seiten */
  margin-bottom:.5rem;
}
#event-modal #tab-products .panel-head h3{margin:0}
#event-modal #tab-products .panel-head .add-controls{
  display:flex;
  gap:.5rem;
  align-items:center;
}
#event-modal #tab-products .panel-head .add-controls input[type="search"]{
  height:36px;
}

/* Kopfzeile im rechten Panel sauber ausrichten */
#event-modal #tab-products .card-block .card-head {
  display: flex;
  align-items: center;         /* vertikal mittig */
  justify-content: space-between;
  gap: .75rem;
  margin-bottom: .5rem;        /* Abstand zur Tabelle */
}

/* Gruppe für Suche + Toggle auf einer Linie */
#event-modal #tab-products .card-head .actions {
  display: flex;
  align-items: center;
  gap: .5rem;
}

#event-modal #tab-products .card-head input[type="search"] {
  height: 36px;
  min-width: 260px;            /* angenehm zu treffen */
}

#event-modal #tab-products .card-head label {
  display: inline-flex;
  align-items: center;
  gap: .4rem;
  font-size: .95rem;
  color: var(--muted);
}

/* Gleiche optische Überschrift links wie rechts */
#event-modal #tab-products .card-block h3 {
  margin: 0;                   /* weil card-head schon Abstand regelt */
  font-size: 1rem;
  font-weight: 600;
}

/* ========== Events: hübschere Badges & Buttons ========== */
.table .badge {
  display:inline-block; padding:.15rem .45rem; border-radius:999px;
  font-size:.85rem; line-height:1; white-space:nowrap;
  border:1px solid transparent;
}
.badge--offen           { background:#f5f7fb; color:#374151; border-color:#e5e7eb; }
.badge--bestellbar      { background:#eaf7ff; color:#075985; border-color:#bae6fd; }
.badge--geschlossen     { background:#fff3e6; color:#92400e; border-color:#fed7aa; }
.badge--rechnung_offen  { background:#f3f4ff; color:#3730a3; border-color:#c7d2fe; }
.badge--zahlung_offen   { background:#fff7ed; color:#9a3412; border-color:#fed7aa; }
.badge--abgerechnet     { background:#ecfdf5; color:#065f46; border-color:#bbf7d0; }

.table .actions-col { width: 1%; white-space: nowrap; }
.row-actions a {
  text-decoration:none; border:1px solid #d1d5db; padding:.2rem .45rem; border-radius:6px;
  display:inline-block; margin-right:.35rem; font-size:.9rem; background:#fff;
}
.row-actions a:hover { border-color:#9ca3af; box-shadow:0 0 0 2px rgba(0,0,0,.04) inset; }
.row-actions a[aria-disabled="true"] { opacity:.5; pointer-events:none; }

/* ====== Status Badges ====== */
.badge {
  display: inline-block;
  padding: .25rem .6rem;
  font-size: .8rem;
  font-weight: 600;
  border-radius: 999px;   /* pill-form */
  line-height: 1.4;
  white-space: nowrap;
}

/* Farben je Status */
.badge--offen {
  background: #e3f2fd;   /* hellblau */
  color: #0d47a1;
}
.badge--bestellbar {
  background: #e8f5e9;   /* hellgrün */
  color: #1b5e20;
}
.badge--geschlossen {
  background: #fff3e0;   /* orange */
  color: #e65100;
}
.badge--rechnung_offen {
  background: #f3e5f5;   /* lila */
  color: #6a1b9a;
}
.badge--zahlung_offen {
  background: #fff9c4;   /* gelb */
  color: #f57f17;
}
.badge--abgerechnet {
  background: #e0f7fa;   /* türkis */
  color: #006064;
}

/* Events-Listen: Spaltenbreiten angleichen (betrifft nur die beiden Listen-Tabellen) */
.events-table th:nth-child(4),
.events-table td:nth-child(4) {
  /* Produkte-Spalte (Zahl) – schmaler, zentriert */
  width: 92px;          /* gern anpassen */
  text-align: center;
}

.events-table th:nth-child(5),
.events-table td:nth-child(5) {
  /* "Bearbeiten"-Spalte – breiter für zwei Buttons */
  width: 100px;         /* gern anpassen */
}

.events-table th:nth-child(6),
.events-table td:nth-child(6) {
  /* "Aktionen" (Primäraktion) – fixer Platz */
  width: 240px;         /* gern anpassen */
}

/* Optional: Buttons in Bearbeiten/Actions nicht umbrechen lassen */
.events-table td:nth-child(5),
.events-table td:nth-child(6) {
  white-space: nowrap;
}
